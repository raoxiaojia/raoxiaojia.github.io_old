\documentclass[a4paper]{article}

\input{temp}

\setcounter{section}{-2}

\begin{document}

\title{Number Fields}

\maketitle

\newpage

\tableofcontents

\newpage

\section{Miscellaneous}

Book: Number Fields, Marcus

Course notes: www.dpmms.ac.uk/~jat58/nfl2018

\newpage

\section{Motivation}
\begin{thm}
If $p$ is an odd prime, then $p=a^2+b^2$ for $a,b \in \Z \iff p \equiv 1 \pmod 4$.
\begin{proof}
If $p=a^2+b^2$, then $p\equiv 0,1,2 \pmod 4$. So this condition on $p$ is necessary.\\
Suppose instead $p \equiv 1 \pmod 4$. Then $\left(\frac{-1}{p}\right) = 1$. Thus $\exists a \in \Z$ such that $a^2 \equiv -1 \pmod p$, or $p|a^2+1$. We can factor $a^2+1=(a+i)(a-i)$ in the ring $\Z[i]$. Here we introduce a notation: if $R \subseteq S$ are rings and $\alpha \in S$, then $$R[\alpha] = \{\sum_{i=0}^n a_i \alpha^i \in S | a_i \in R\}$$, the smallest subring of $S$ containing both $R$ and $\alpha$.

We know from IB GRM that $\Z[i]$ is a UFD. Now $p|(a+i)(a-i)$. If $p$ is irreducible in $\Z[i]$ then $p|a+i$ or $p|a-i$, contradiction. Thus $p$ is reducible in $\Z[i]$, hence $p=z_1z_2$ with $z_1,z_2 \in \Z[i]$. If $z_1 = A+Bi$, $A,B\in \Z$, then $A^2+B^2 = p$.
\end{proof}
\end{thm}

Another example is when $p$ is an odd prime. Does the equation $$x^p+y^p=z^p$$ have solutions with $x,y,z\in \Z$ and $xyz \neq 0$?

\begin{thm} (Kummer, 1850)\\
If $\Z[e^{2\pi i/p}]$ is a UFD, then there are no solutions.\\
Strategy: factor $x^p+y^p = \prod_{j=0}^{p-1} (x+e^{2\pi ij/p}y)$ in $\Z[e^{2\pi i/p}]$.
\end{thm}

However, we now know $\Z[e^{2\pi i/p}]$ is a UFD $\iff$ $p \leq 19$.

\begin{thm} (Kummer, 1850)\\
If $p$ is a \emph{regular} prime, then there are no solutions.\\
If $p<100$, then $p$ is regular $\iff$ $p \neq 37,59,67$.
\end{thm}

We have seen various examples such as $\Z \subseteq \Q$, $\Z[i] \subseteq \Q[i]$, $\Z[e^{2\pi i/p}] \subseteq \Q[e^{2\pi i/p}]$, or in general, $\mathcal{O}_L\subseteq L$, where a ring of "integers" lies in a number field.

\newpage

\section{Ring of integers}
Recall: A field extension $L/K$ is an inclusion $K \leq L$ of fields. The degree of $L/K$ is $[L:K] = \dim_K L$. We say $L/K$ is finite if $[L:K]<\infty$.

\begin{defi} (1.1)\\
A number field is a finite extension $L/\Q$. Here are two ways to construct number fields:\\
(1) Let $\alpha \in \C$ be an algebraic number. Then $L=\Q(\alpha)$ is a number field;\\
(2) Let $K$ be a number field, and let $f(X) \in K[X]$ be an irreducible polynomial. Then $L=K[X]/(f(X))$ is a number field.\\
(Recall Tower Law: $[L:Q] = [L:K][K:Q] < \infty$).
\end{defi}

\begin{defi} (1.2)\\
(1) Let $L/K$ be a field extension. Then we say $\alpha \in L$ is algebraic over $K$ if there exists a monic $f(X) \in K[X]$ such that $f(\alpha) = 0$;\\
(2) Let $L/\Q$ be a field extension. Then we say $\alpha \in L$ is an algebraic integer if there exists a monic $f(X) \in Z[X]$ such that $f(\alpha) = 0$.
\end{defi}

\begin{defi} (1.3)\\
Let $L/K$ be a field extension, and let $\alpha \in L$ be algebraic over $K$. We call the minimal polynomial of $\alpha$ over $K$ the monic polynomial $f_\alpha(X) \in K[X]$ of least degree such that $f_\alpha(\alpha)=0$.
\end{defi}

We recall why $f_\alpha(X)$ is well-defined: there exists some monic $f(X) \in K[X]$ with $f(\alpha)=0$ as $\alpha$ is algebraic. If $f_\alpha(\alpha),f'_\alpha(\alpha) \in K[X]$ both satisfy the definition of minimal polynomial, then we apply the polynomial division algorithm to write $$f_\alpha(X) = p(X) f'_\alpha(X) + r(X)$$ where $p(X),r(X) \in K[X]$, and $\deg r < \deg f'_\alpha$. Evaluate at $X=\alpha$, we have $0=f_\alpha(\alpha) = p(\alpha)f'_\alpha(\alpha)+r(\alpha)=r(\alpha)$. By minimality of $\deg f'_\alpha$, we must have $r=0$. Then $\deg f_\alpha = \deg f'_\alpha$, and $f_\alpha(X),f'(\alpha)$ are both monic, i.e. $p(X) = 1$ and $f_\alpha(X) = f'_\alpha(X)$.

\begin{lemma}(1.4)\\
Let $L/\Q$ be a field extension, and let $\alpha \in L$ be an algebraic integer. Then:\\
(1) The minimal polynomial $f_\alpha(X)$ of $\alpha$ over $\Q$ lies in $\Z[X]$;\\
(2) If $g(X) \in \Z[X]$ satisfies $g(\alpha) = 0$, then there exists $q(X) \in \Z[X]$ such that $g(X) = f_\alpha(X) q(X)$;\\
(3) The kernel of the ring homomorphism $\Z[X] \to L$ by $f(X) \to f(\alpha)$ equals $(f_\alpha(X))$, the ideal generated by $f_\alpha(X)$.
\begin{proof}
(1) Recall that if $f(X) = a_n X^n + ... + a_0 \in \Z[X]$, then we define from GRM, the content $c(f) = \gcd(a_n,...,a_0)$. Recall Gauss' Lemma: If $f(X), g(X) \in \Z[X]$, then $c(fg) = c(f)c(g)$. Since $\alpha \in L$ is an algebraic integer, there exists monic $f(X) \in \Z[X]$ such that $f(\alpha) = 0$, i.e. $c(f) = 1$. Apply polynomial division in $\Q[X]$ to get $f(X) = p(X) f_\alpha(X) +r(X)$, where $p(X),r(X) \in \Q[X]$, $\deg r < \deg f_\alpha$. The definition of $f_\alpha(X)$ implies that $r(X) = 0$, hence $f(X) = p(X) f_\alpha(X)$. Now choose integers $n,m \geq 1$ such that $np(X) \in \Z[X]$, $c(np) = 1$, and $mf_\alpha(X) \in \Z[x]$, $c(mf_\alpha) = 1$. Then $nmf(x) = (np(x))(mf_\alpha(x)) \implies c(nmf(x)) = nm = 1$. So $n=m=1$, hence $f_\alpha(x) \in \Z[X]$.\\
(2) Let $g(X) \in \Z[X]$ be such that $g(\alpha) =0 $. WLOG $g(x) \neq 0$ and $c(g) = 1$. Now apply polynomial division to write $g(x) = q(x) f_\alpha(x) + s(x)$ where $q(x),s(x) \in \Q[x]$, $\deg s < \deg f_\alpha$. Again by definition we have $s(x) = 0$. Choose an integer $k \geq 1$ such that $kq(x) \in Z[x]$ and $c(kq) =1$. Then $kg(x) = kq(x) f_\alpha(x) \implies k=c(kg) = c(kq) c(f_\alpha) = 1$. So $k=1$, hence $q(x) \in \Z[x]$.\\
(3) is a reformulation of (2).
\end{proof}
\end{lemma}

Let $L/\Q$ be a field extension. Last time we said $\alpha \in L$ is an algebraic integer if $\exists$ monic polynomial $f(x) \in \Z[x]$ such that $f(\alpha) = 0$. We proved that if $\alpha \in L$ is an algebraic integer and $f_\alpha(x) \in \Q[x]$ is the minimal polynomial of $\alpha$ over $\Q$, then $f_\alpha(x) \in \Z[x]$. However there is a small problem, so we'll prove again.
\begin{proof}
Choose $f(x) \in \Z[x]$ monic with $f(\alpha) = 0$, and write $$f(x) = q(x) f_\alpha(x) + r(x)$$ where $q(x),r(x) \in \Q[x]$, $\deg r < \deg f_\alpha$. Then $r(\alpha) = 0 \implies r(x) = 0$, by minimality of $\deg f_\alpha$. I said that we can find integer $n,m \geq 1$ s.t. $nf\alpha(x) \in \Z[x]$, $c(nf\alpha) = 1$, $mq(x) \in \Z[x]$, $c(mq) = 1$. However we need to explain why do they exist. Note $f_\alpha(x)$ and $q(x)$ are both monic. Choose integers $N,M \geq 1$ such that $Nf_\alpha(x) \in \Z[x]$, $Mq(x) \in \Z[x]$. Then $c(Nf_\alpha) | N$, $c(Mq)|M$ as those are the leading term of the polynomial. Now let $N/c(Nf\alpha) = n \in \Z$, $M/c(Mq) = m \in \Z$. Now $nmf(x) = (nf\alpha(x)) (mq(x))$, so $c(nmf(x)) = nm = 1 \implies n=m=1$.
\end{proof}

\begin{coro} (1.5)\\
If $\alpha \in \Q$, then $\alpha$ is an algebraic integer $\iff$ $\alpha \in \Z$.
\begin{proof}
By lemma 1.4, $\alpha$ is an algebraic integer $\iff f_\alpha(x) \in \Z[x]$. But if $\alpha \in \Q$, then $f_\alpha(x) = x-\alpha$, and the first needs to divide the second polynomial.
\end{proof}
\end{coro}

\begin{notation}
If $L/\Q$ is any field extension, we write $\mathcal{O}_L =\{\alpha \in L | \alpha$ is an algebraic integer$\}$.
\end{notation}

Now we proceed to the first non-trivial result of the course:

\begin{prop} (1.6)\\
If $L/\Q$ is a field extension, $\mathcal{O}_L$ is a ring.
\begin{proof}
Clearly $0,1 \in \mathcal{O}_L$. Now if $\alpha \in \mathcal{O}_L$, then $f_{-\alpha}(x) = (-1)^{\deg f_\alpha} f_\alpha (-x) \implies -\alpha \in \mathcal{O}_L$.\\
The hard part is to show that if $\alpha,\beta \in \mathcal{O}_L$, then $\alpha+\beta \in \mathcal{O}_L$ and $\alpha\beta \in \mathcal{O}_L$.\\
Observe that if $\alpha \in \mathcal{O}_L$, then $\Z[\alpha] \subseteq L$ is a finitely generated $\Z$-module. By definition, $\Z[\alpha]$ is generated by $1,\alpha,\alpha^2,\alpha^3,...$. Let $f_\alpha(x) = x^d + a_1 x^{d-1} + ... + ad$, $a_i \in \Z$. Then $\alpha^d = -(a_1 \alpha^{d-1} + ... + ad)$, so $\alpha^d \in \sum_{i=0}^{d-1} \Z \alpha^i$. By induction, we see that $\alpha^n \in \sum_{i=0}^{d-1} \Z \alpha^i$ for all $n \geq d$. Hence $\Z[\alpha] = \sum_{i=0}^{d-1} \Z \alpha^i$. Now take $\alpha,\beta \in \mathcal{O}_L$ and let $d = \deg f_\alpha$, $e = \deg f_\beta$.\\
By definition, $\Z[\alpha,\beta] =\Z[\alpha][\beta]$ is generated as a $\Z$-module by $\{\alpha^i\beta^j\}_{i,j \in \N}$. The same argument show that in fact this ring is generated as a $\Z$-module by $\{\alpha^i \beta^j\}$ for $0\leq i\leq d-1, 0 \leq j \leq e-1$. So $\Z[\alpha,\beta]$ is finitely generated. From GRM we know the classification of finitely generated $\Z$-modules implies that there's an isomorphism $\Z[\alpha,\beta] \cong \Z^r \oplus T$ for some $r \geq 1$ and finite abelian group $T$. In fact, $T=0$: if $\gamma \in T$, then $|T|\gamma = 0$, by Lagrange's theorem. But $\Z[\alpha,\beta] \subseteq L$, a $\Q$-vector space, so this forces $\gamma = 0$. Now we can therefore fix an isomorphism $\Z[\alpha,\beta] \cong \Z^r$ ($r \geq 1$. There's an endomorphism $m_{\alpha\beta}: \Z[\alpha,\beta] \to \Z[\alpha,\beta]$ by $\gamma \to \alpha\beta\gamma$ (as a $\Z$-module). $m_{\alpha\beta}$ corredponds to an $r \times r$ matrx $A_{\alpha\beta} \in M_{r \times r} (\Z)$.\\
Let $F_{\alpha\beta}(x) = \det (x\cdot 1_r -A_{\alpha\beta}) \in \Z[x]$, a monic polynomial. By the Cayley-Hamilton theorem, $F_{\alpha\beta}(m_{\alpha\beta}) = 0$ as endomorphisms of $\Z[\alpha,\beta]$. Write $F_{\alpha\beta}(x) = x^r + b_1x^{r-1} + ... + b_r$ for $b_i \in \Z$. Thus $m^r_{\alpha\beta} + b_1 m^{r-1}_{\alpha\beta} + ... + b_r \cdot 1_r = 0$ as endomorphisms of $\Z[\alpha,\beta]$.\\
Now the image of $1$ is $(\alpha\beta)^r+b_1(\alpha\beta)^{r-1} + ... + b_r = F_{\alpha\beta}(\alpha\beta) = 0$. So $\alpha\beta \in \mathcal{O}_L$.\\
The argument to show $\alpha+\beta \in \mathcal{O}_L$ is identical, replacing $m_{\alpha\beta}$ by $m_{\alpha+\beta}: \Z[\alpha,\beta] \to \Z[\alpha,\beta]$ by $\gamma \to (\alpha+\beta)\gamma$. The detail is omitted here.
\end{proof}
\end{prop}

We call $\mathcal{O}_L$ the ring of algebraic integers of $L$.

\begin{lemma} (1.7)\\
Let $L/\Q$ be a number field, and let $\alpha \in L$. Then $\exists n \geq 1$ an integer such that $n\alpha \in \mathcal{O}_L$.
\begin{proof}
Let $f(x) \in \Q[x]$ be a monic polynomial such that $f(\alpha) = 0$. Then $\exists n\in \Z, n \geq 1$ such that $g(x) = n^{\deg f} f(x/n) \in \Z[x]$ is monic. But then $g(n\alpha) = n^{\deg f} f(\alpha) = 0$. So $n\alpha \in \mathcal{O}_L$.
\end{proof}
\end{lemma}

\newpage

\section{Complex embeddings}
Let $L$ be a number field.
\begin{defi} (2.1)\\
A \emph{complex embedding} of $L$ is a field homomorphism $\sigma: L \to \C$. Note: in this case, $\sigma$ is injective, and $\sigma|_\Q$ is the usual embedding $\Q \to \C$.
\end{defi}

\begin{prop} (2.2)\\
Let $L/K$ be an extension of number fields, and let $\sigma_0:K \to \C$ be a complex embedding. Then there exist exactly $[L:K]$ embeddings $\sigma:L \to \C$ which extends $\sigma_0$ ($\sigma|_K = \sigma_0$).
\begin{proof}
Induction on $[L:K]$. If $[L:K] = 1$, then $L=K$, so $\sigma_0$ determines $\sigma$.\\
In general, choose $\alpha \in L-K$ and consider $L/K(\alpha)/K$. By the Tower law, $[L:K] = [L:K(\alpha)][K(\alpha):K]$ and $[K(\alpha):K]>1$. By induction, it's enough to show there are exactly $[K(\alpha):K]$ embeddings $\sigma:K(\alpha) \to \C$ extending $\sigma_0$.\\
Let $f_\alpha(x) \in K[x]$ be the minimal polynomial of $\alpha$ over $K$. Observe there's an isomorphism $K[x] / (f_\alpha(x)) \to K(\alpha)$ by sending $x \to \alpha$. To give a complex embedding $\sigma:K(\alpha) \to \C$ extending $\sigma_0$, it's equivalent to give a root $\beta$ of $(\sigma_0 f)(x)$ in $\C$ ($\sigma_0 f(x) \in \C[x]$ means apply $\sigma_0$ to the coefficients of $f(x)$). Dictionary: $\sigma \to \beta = \sigma (\alpha)$. We have $[K(\alpha):K] = \deg f_\alpha = \deg \sigma_0 f_\alpha$. It's enough to show $\sigma_0 f_\alpha$ has distinct roots in $\C$. The polynomial $f_\alpha(x) \in K[x]$ is irreducible, so is prime to its derivative $f'_\alpha(x)$ ($char\ K =0$). So $\alpha$ is separable over $K$.
\end{proof}
\end{prop}

Recall from last lecture, let $L$ be a number field, a complex embedding is a field homomorphism $\sigma:L \to \C$. The number of such embeddings is $[L:\Q$]. If $L = \Q(\alpha)$, and $f_\alpha(x) \in \Q[x]$ is the minimal polynomial, then there is a bijection $\{\sigma:L \to \C \} \leftrightarrow \{$ roots $\beta \in \C$ of $f_\alpha(x)\}$ by sending $\sigma \to \beta = \sigma(alpha)$.

Notation: if $\sigma:L \to \C$ is a complex embedding, then $\bar{\sigma} : L \to \C$ is also a complex embedding, where $\bar{\sigma}(\alpha) = \overline{\sigma(\alpha)}$ (complex conjugation). If $\sigma = \bar{\sigma}$, then $\sigma(L) \subseteq \R$. Otherwise $\sigma \neq \bar{\sigma}$ and $\sigma(L) \not\subseteq \R$.

We write $r$ for the number of complex embedding $\sigma$ such that $\sigma = \bar{\sigma}$, $s$ for the number of pairs of embeddings $\{\sigma,\bar{\sigma}\}$ where $\sigma \neq \bar{\sigma}$. Then $r+2s = [L:\Q]$.

\begin{eg}
Let $d \in \Z$ be square-free, $d \neq 0,1$. Let $\Q(\sqrt{d}) = \Q[x] / (x^2-d)$. If $d>0$, then $r=2,s=0$ (real quadratic field).\\
If $d<0$, then $r=0,s=1$ (imaginary quadratic field).
\end{eg}

\begin{eg}
Let $m \in \Z$ cube-free, $m \neq 0,1,-1$. Let $\Q(\sqrt[3]{m}) =\Q[x]/(x^3-m)$. Then $r=1,s=1$, since $x^3-m$ has one real and two complex roots.
\end{eg}

\begin{defi} (2.3)\\
Let $L/K$ be an extension of number fields, and let $\alpha \in L$. Let $m_\alpha:L\to L$ be the $K$-linear map defined by $m_\alpha(\beta) = \alpha\beta$. Then we define
\begin{equation*}
\begin{aligned}
\tr_{L/K}(\alpha) = \tr m_\alpha \in K\\
N_{L/K}(\alpha) = \det m_\alpha \in K
\end{aligned}
\end{equation*}
the trace and norm of $\alpha$ respectively.
\end{defi}

\begin{lemma} (2.4)\\
If $L/K$ is an extension of number fields and $\alpha \in L$, then 
\begin{equation*}
\begin{aligned}
\tr_{L/K}(\alpha) = [L:K(\alpha)] \tr_{K(\alpha)/K}(\alpha)\\
N_{L/K}(\alpha) = N_{K(\alpha)/K} (\alpha)^{[L:K(\alpha)]}
\end{aligned}
\end{equation*}
\begin{proof}
There's an isomorphism $L \cong K(\alpha)^{[L:K(\alpha)]}$ of $K(\alpha)$-vector spaces(?).
\end{proof}
\end{lemma}

\begin{lemma} (2.5)\\
Let $L/K$ be an extension of number fields and let $\alpha \in L$. Let $\sigma_0:K \to \C$ be a complex embedding, and let $\sigma_1,...,\sigma_n:L \to \C$ be the embeddings of $L$ extending $\sigma_0$.\\
Then 
\begin{equation*}
\begin{aligned}
\sigma_0(\tr_{L/K} (\alpha)) = \sigma_1(\alpha) + ... + \sigma_n(\alpha)\\
\sigma_0(N_{L/K}(\alpha)) = \sigma_1(\alpha)...\sigma_n(\alpha).
\end{aligned}
\end{equation*}
\begin{proof}
WLOG let $L=K(\alpha)$. Let $f_\alpha(x) \in K[x]$ be the minimal polynomial of $\alpha$ over $K$. Then $$(\sigma_0 f_\alpha)(x) = (x-\sigma_1(\alpha))(x-\sigma_2(\alpha))...(x-\sigma_n(\alpha))$$
If $f(\alpha) = x^n+a_1x^{n-1}+...+a_n$, then $\sigma_0(a_1) = -(\sigma_1(\alpha)+...+\sigma_n(\alpha))$, $\sigma_0(a_n) = (-1)^n \sigma_1(\alpha)...\sigma_n(\alpha)$.\\
Let $g(x) \in K[x]$ be the characteristic polynomial of $m_\alpha$. If $g(x) = x^n+b_1x^{n-1}+...+b_n$, then $b_1 = -\tr m_\alpha = -\tr_{L/K}(\alpha)$, $b_n = (-1)^n \det m_\alpha = (-1)^n N_{L/K}(\alpha)$.By Cayley-Hamilton, $g(m_\alpha) = 0 \implies g(\alpha) = 0 \implies f_\alpha(x) = g(x)$.
\end{proof}
\end{lemma}

\begin{coro} (2.6)\\
If $\alpha \in \mathcal{O}_L$, then $\tr_{L/K}(\alpha)$, $N_{L/K}(\alpha) \in \mathcal{O}_K$.
\begin{proof}
If $\beta \in K$ then $\beta \in \mathcal{O}_K$ $\iff$ $\sigma_0(\beta) \in \mathcal{O}_\C$ (as $\forall f(x) \in \Z[x], f(\beta) = 0 \iff f(\sigma_0(\beta)) = 0$).\\
By the lemma, $\sigma_0 \tr_{L/K} (\alpha) = \sigma_1(\alpha)+...+\sigma_n(\alpha)$. If $\alpha \in \mathcal{O}_L$, then $\sigma_1(\alpha),...,\sigma_n(\alpha) \in \mathcal{O}_\C \implies \sigma_1(\alpha)+...+\sigma_n(\alpha) \in \mathcal{O}_\C$ $\implies \sigma_0 \tr_{L/K}(\alpha) \in \mathcal{O}_\C$ $\implies \tr_{L/K}(\alpha) \in \mathcal{O}_K$.

The same argument works for the norm.
\end{proof}
\end{coro}

\begin{prop} (2.7)\\
Let $d \in \Z$ be squarefree, $d \neq 0,1$, and let $L = \Q(\sqrt{\alpha})$. Then 
\begin{equation*}
\begin{aligned}
\mathcal{O}_L = \left\{\begin{array}{ll}
\Z[\sqrt{d}] & d \equiv 2,3 \pmod 4\\
\Z[\frac{1+\sqrt{d}}{2} & d \equiv 1 \pmod 4
\end{array}
\right.
\end{aligned}
\end{equation*}
\begin{proof}
If $\alpha \in L$, then $\alpha \in \mathcal{O}_L$ if and only if both trace and norm (over $L/\Q$) of $\alpha$ is in $\Z$. Why? Forward direction is the previous corollary; if $\alpha \in L$, then $f(\alpha) = 0$, where $f(x) = (x-\sigma_1(\alpha))(x-\sigma_2(\alpha)) = x^2 - \tr_{L/\Q}(\alpha)x+N_{L/\Q}(\alpha) \in \Q[x]$, where $\sigma_1,\sigma_2$ are complex embeddings of $L$. So backward holds too.

Let $\alpha \in L$. Write $\alpha = \frac{u}{2} + \frac{v}{2}\sqrt{d}$ where $u,v \in \Q$. If $\alpha \in \mathcal{O}_L$, then $\tr_{L/\Q}(\alpha) = u \in \Z$, and $N_{L/\Q}(\alpha) = \frac{1}{4} (u+\sqrt{d} v) (u-\sqrt{d} v) = \frac{1}{4} (u^2-dv^2) \in \Z$ $\implies u^2-dv^2 \in 4\Z$ $\implies dv^2\in\Z$.\\
Write $v=\frac{r}{s}$ where $r,s \in \Z, s \neq 0, (r,s) = 1$. Then we get $dr^2 \in s^2\Z$ $\implies s^2 | dr^2$.\\
If $p$ is a prime and $p|s$ then $p^2|d$. But we assumed $d$ is square-free. So $s=1$, so $v \in \Z$.

We've shown if $\alpha \in \mathcal{O}_L$, then $\alpha = \frac{u}{2} + \frac{v}{2}\sqrt{d}$ where $u,v \in \Z$ and $u^2 \equiv d^2 \pmod 4$.\\

Case 1: $d \equiv 2,3 \pmod 4$. Then $u^2,v^2 \equiv 0,1 \pmod 4$. Considering the congruence $u^2\equiv dv^2 \pmod 4$ shows that both $u,v \in 2\Z$. Hence $\alpha \in \Z[\sqrt{d}] = \{a+b\sqrt{d} | a,b \in \Z\}$, and $\mathcal{O}_L = \Z[\sqrt{d}]$.

Case 2: $d \equiv 1 \pmod 4$. Hence $u^2\equiv v^2 \pmod 4$, so $u \equiv v \pmod 2$. Hence $\mathcal{O}_L \subseteq \{\frac{u}{2}+\frac{v}{2}\sqrt{d} | u,v \in \Z, u \equiv 1 \pmod 2\} =\Z \oplus \Z(\frac{1+\sqrt{d}}{2})$. It remains to show that $\frac{1+\sqrt{d}}{2}$ is an algebraic integer.\\
We have $\tr_{L/\Q}(\frac{1+\sqrt{d}}{2}) = 1$, $N_{L/\Q}(\frac{1+\sqrt{d}}{2}) = \frac{1-d}{4} \in \Z$.
\end{proof}
\end{prop}

Recall that if $R$ is a ring, then a unit in $R$ is an element $u \in R$ such that there exists $v \in R$ such that $uv = 1$.

The set $\R^* = \{u \in R | u $ is a unit$\}$ forms a group under multiplication.

\begin{lemma} (2.8)\\
If $L$ is a number field, then the units in $\mathcal{O}_L$ are $\mathcal{O}_L^* = \{\alpha \in \mathcal{O}_L| N_{L/\Q}(\alpha) = \pm 1\}$.
\begin{proof}
next time.
\end{proof}
\end{lemma}

\begin{rem}
We'll prove later in the course that $\mathcal{O}_L^*$ is a finite group $\iff$ either $L=\Q$ or $L$ is an imaginary quadratic field.
\end{rem}

\iffalse
\begin{equation*}
\begin{aligned}

\end{aligned}
\end{equation*}
\fi

\end{document}
